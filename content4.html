<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>4. √ÅLLOM√ÅS: A BALEKOK √âS FIRM√ÅK NYOMDOKAIN</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --gold:#ffe7a3;
    --sky:#68c7ff;
    --ink:#f5f5f5;
    --panel:rgba(0,0,0,0.65);
    --panel2:rgba(0,0,0,0.30);
    --panel3:rgba(0,0,0,0.45);
    --shadow:rgba(0,0,0,0.6);
    --line:rgba(255,231,163,0.16);
    --line2:rgba(255,231,163,0.10);
}

body {
    font-family: 'Georgia', serif;
    background: url('images/akademia_epulete.jpg') center/cover no-repeat fixed;
    color: var(--ink);
    padding: 20px;
    margin: 0;
}

.container {
    max-width: 700px;
    margin: auto;
    background: var(--panel);
    padding: 30px;
    border-radius: 14px;
    box-shadow: 0 0 25px var(--shadow);
    backdrop-filter: blur(1px);
}

/* C√≠m */
h1 {
    font-size: 32px;
    margin-bottom: 15px;
    text-align: center;
    color: var(--gold);
    letter-spacing: 0.4px;
    text-shadow: 0 2px 10px rgba(0,0,0,0.55);
    position: relative;
}
h1::after{
    content:"";
    display:block;
    width: 78%;
    height: 1px;
    margin: 14px auto 0 auto;
    background: linear-gradient(90deg, transparent, var(--line), transparent);
}

/* Sz√∂veg */
p {
    line-height: 1.6;
    font-size: 18px;
    margin-bottom: 14px;
}

.highlight {
    color: var(--gold);
    font-weight: bold;
}

/* T√°vols√°g doboz */
.distance-box {
    margin: 10px 0 20px 0;
    padding: 12px 16px;
    border-radius: 8px;
    background: var(--panel3);
    font-size: 16px;
    text-align: center;
    border: 1px solid rgba(255,231,163,0.18);
    box-shadow: 0 0 14px rgba(0,0,0,0.35) inset;
}
.distance-box button {
    font-family: inherit;
    font-size: 16px;
    padding: 8px 14px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: var(--gold);
    color: #2b1b0c;
    margin-bottom: 8px;
    box-shadow: 0 10px 18px rgba(0,0,0,0.35);
}
.distance-box button:active {
    transform: scale(0.98);
}
.distance-status {
    display: block;
    margin-top: 4px;
    font-size: 15px;
    opacity: 0.95;
}

/* gombsor */
.btn-row {
    text-align: center;
    margin-top: 10px;
}

/* Navig√°ci√≥s gomb ‚Äì √©gk√©k (lap alj√°n) */
.nav-btn {
    display: inline-block;
    margin: 6px 4px;
    padding: 9px 18px;
    background: var(--sky);
    color: #033048;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    font-size: 15px;
    border: 1px solid rgba(3,48,72,0.15);
}
.nav-btn:hover {
    filter: brightness(1.05);
}

/* F≈ëoldal gomb */
.home-btn {
    display: inline-block;
    margin: 8px 4px 0 4px;
    padding: 9px 18px;
    background: var(--gold);
    color: #333;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    font-size: 15px;
}
.home-btn:hover {
    filter: brightness(1.05);
}

/* K√©p st√≠lus */
.content-image {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 10px;
    margin: 20px 0;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    outline: 1px solid rgba(255,231,163,0.12);
}

/* Sz√≥ szerinti blokk */
.story-pre {
    white-space: pre-wrap;
    line-height: 1.7;
    font-size: 18px;
    margin: 18px 0 0 0;
    padding: 18px 16px;
    background:
        repeating-linear-gradient(
            to bottom,
            rgba(0,0,0,0.30),
            rgba(0,0,0,0.30) 28px,
            rgba(255,231,163,0.06) 29px,
            rgba(0,0,0,0.30) 30px
        );
    border-left: 4px solid var(--gold);
    border-radius: 10px;
    position: relative;
    box-shadow: 0 0 18px rgba(0,0,0,0.35) inset;
}
.story-pre::before{
    content:"";
    position:absolute;
    top: 10px;
    right: 10px;
    width: 46px;
    height: 46px;
    border-radius: 12px;
    background: radial-gradient(circle at 30% 30%, rgba(255,231,163,0.22), transparent 60%);
    pointer-events:none;
}
.story-pre::first-letter{
    font-size: 42px;
    line-height: 0.9;
    font-weight: 800;
    color: var(--gold);
    text-shadow: 0 6px 18px rgba(0,0,0,0.55);
}
.story-pre::first-line{
    color: rgba(255,231,163,0.95);
}

/* Kiemel√©sek a t√∂rt√©netben */
.story-pre strong,
.story-pre b{
    color: var(--gold);
    font-weight: 800;
    text-shadow: 0 1px 10px rgba(0,0,0,0.25);
}
.story-pre em{
    color: rgba(200,240,255,0.95);
    font-style: normal;
    font-weight: 700;
}
.story-pre mark{
    background: rgba(255,231,163,0.16);
    color: var(--gold);
    padding: 0 4px;
    border-radius: 4px;
    border: 1px solid rgba(255,231,163,0.18);
}

/* Mobil finomhangol√°s */
@media (max-width: 480px) {
    body { padding: 10px; }
    .container { padding: 22px; }
    h1 { font-size: 26px; }
    p { font-size: 17px; }
    .story-pre { font-size: 17px; padding: 16px 14px; }
    .story-pre::first-letter{ font-size: 38px; }
}
</style>
</head>

<body>

<div class="container">

<h1>1. √ÅLLOM√ÅS: A BALEKOK √âS FIRM√ÅK NYOMDOKAIN</h1>

<!-- T√ÅVOLS√ÅGM√âR√âS -->
<div class="distance-box">
    <button id="startNavBtn">T√°vols√°g m√©r√©se (GPS)</button>
    <span id="distanceText" class="distance-status">
        Enged√©lyezd a helymeghat√°roz√°st a b√∂ng√©sz≈ëben.
    </span>
</div>

<!-- NAVIG√ÅCI√ìS GOMB ‚Äì LAP ALJ√ÅN -->
<div class="btn-row">
    <a href="https://maps.app.goo.gl/?q=48.4592749331696,18.898867085318535"
       target="_blank"
       class="nav-btn">
        üìç √ötvonal az Akad√©mi√°hoz
    </a>
</div>

<pre class="story-pre">M√°r az √©p√ºlet maga is √°mulatba ejt≈ë‚Ä¶ nem besz√©lve a k√©t hatalmas f√°r√≥l, ami a f≈ëbej√°ratn√°l a l√©pcs≈ësort keretezi, √©s amelyeket m√©g Magyarorsz√°gon √ºltettek, hiszen t√∂bb mint 100 √©vesek‚Ä¶

Menjetek be a kapun, mely mindig nyitva van.

Az Akad√©mi√°hoz h√°rom √©p√ºlet tartozik, a f≈ë√©p√ºlet az, amelyn√©l bej√∂ttetek.

Az √©p√ºleteket hatalmas park √∂vezi. S√©t√°ljatok k√∂rbe, √©s szippants√°tok be azt a mili≈ët, amit a selmeci di√°kok √©vsz√°zadokon √°t.

Gondolatban rep√ºljetek vissza az 1700-as, 1800-as √©vekbe, amikor fekete <mark>gruben</mark>ben √©s ≈ëzbarna <mark>walden</mark>ben r√≥tt√°k a selmeci di√°kok ezeket a l√©pcs≈ëket. √ìri√°si megtiszteltet√©s volt, ha egy <mark>pog√°ny</mark> √∫joncot <mark>balekk√°</mark> kereszteltek, majd pedig k√©t √©v tapasztalattal a h√°ta m√∂g√∂tt <mark>firm√°v√°</mark> avatt√°k.

</pre>

<!-- FELOLVAS√ÅS GOMBOK -->
<div style="text-align: center; margin: 20px 0;">
    <button id="speakBtn" class="nav-btn" style="display: inline-block; margin: 5px; background: rgba(104,199,255,0.9); color: #000;">
        üîä Felolvas√°s
    </button>
    <button id="stopBtn" class="nav-btn" style="display: inline-block; margin: 5px; background: rgba(255,100,100,0.9); color: #000; display: none;">
        ‚èπ Stop
    </button>
</div>

<img src="images/egyetemistak.jpg" alt="Szakest√©ly tiszts√©gvisel≈ëi Sopronban" class="content-image" loading="lazy">

<pre class="story-pre">  <strong>Szakest√©ly ‚Äûtiszts√©gvisel≈ëi"</strong> Sopronban, az erd√©sz kar barna egyenruh√°j√°ban, a r√°val√≥ foltokkal, √©s a szakest√©ly tiszts√©geihez duk√°l√≥ szalagokkal.

S√©t√°ljatok k√∂rbe a Selmeci Akad√©mia kertj√©ben, tegy√©tek tiszteleteteket ott, ahonn√©t annyi sz√©p trad√≠ci√≥ elsz√°rmazott‚Ä¶.

Fejts√©tek meg az al√°bbi <strong>rejtv√©nyt</strong>, √©s a kulccsal megtudj√°tok, mi a k√∂vetkez≈ë c√©l√°llom√°sotok‚Ä¶
<strong>Rejtv√©ny:</strong>
<strong>Az Akad√©mia f≈ë√©p√ºlet√©nek bej√°rat√°hoz egy l√©pcs≈ësor vezet, √©s ezt a l√©pcs≈ësort 100 √©ves bor√≥kafeny≈ëk ≈ërzik. H√°ny hatalmas bor√≥kafeny≈ë ≈ërk√∂dik a l√©pcs≈ësor ment√©n?</strong></pre>

<!-- F≈êOLDAL GOMB -->
<div class="btn-row">
    <!-- K√ìD BEK√âR≈ê BLOKK -->
<style>
/* k√∂z√©ps≈ë doboz */
.code5-container {
    max-width: 600px;
    margin: 22px auto 18px auto;
    background: rgba(0, 0, 0, 0.7);
    padding: 24px 20px 30px 20px;
    border-radius: 14px;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
    border: 1px solid rgba(255,231,163,0.16);
}

/* c√≠m */
.code5-container h2 {
    font-size: 26px;
    margin-top: 0;
    margin-bottom: 14px;
    text-align: center;
    color: #ffe7a3;
    text-shadow: 0 2px 10px rgba(0,0,0,0.55);
}

/* sz√∂veg */
.code5-container p {
    font-size: 18px;
    line-height: 1.6;
    text-align: center;
    margin-bottom: 18px;
}

/* input + gomb */
#code5_input {
    width: 100%;
    padding: 10px 12px;
    margin-top: 4px;
    font-size: 18px;
    border-radius: 8px;
    border: none;
    box-sizing: border-box;
    outline: 1px solid rgba(255,231,163,0.10);
    background: rgba(255,255,255,0.92);
}

#code5_btn {
    display: block;
    width: 100%;
    padding: 12px 16px;
    margin-top: 12px;
    font-size: 18px;
    font-weight: bold;
    font-family: inherit;
    text-align: center;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #ffe7a3;
    color: #333;
    box-shadow: 0 0 10px rgba(0,0,0,0.6);
}
#code5_btn:active { transform: scale(0.98); }

/* hiba√ºzenet */
#code5_error {
    margin-top: 10px;
    font-size: 15px;
    color: #ffb3b3;
    text-align: center;
}

/* Mobil finomhangol√°s */
@media (max-width: 480px) {
    .code5-container {
        margin: 18px 10px 14px 10px;
        padding: 20px 14px 24px 14px;
    }
    .code5-container h2 { font-size: 24px; }
    .code5-container p, #code5_btn, #code5_input { font-size: 17px; }
}
</style>

<div class="code5-container">
    
<input id="code5_input" type="text" autocomplete="off" placeholder="√çrd ide a sz√°mot">
    <button id="code5_btn" type="button" onclick="code5_check()">‚ûú Bel√©p√©s a k√∂vetkez≈ë √°llom√°sra</button>
    <div id="code5_error"></div>
    <div id="code5_success" style="display:none; margin-top: 18px; padding: 18px; background: rgba(255, 231, 163, 0.15); border-left: 4px solid #ffe7a3; border-radius: 8px; color: #ffe7a3; font-size: 17px; line-height: 1.7;">
        <p style="font-weight: bold; font-size: 20px; margin-top: 0;">üéâ Megfejtett√©tek!</p>
        <p style="margin-bottom: 14px;">Kiny√≠lt az ajt√≥ a k√∂vetkez≈ë c√©l√°llom√°s fel√©‚Ä¶</p>
        <p style="margin-bottom: 14px;">A s√©ta ut√°n ideje megpihenni.</p>
        <p style="margin-bottom: 14px;">Vegy√©tek utatokat Matyi pinc√©j√©be, eleg√°nsabb nev√©n a Restaur√°cia Matej-be, vagyis a M√°ty√°s vend√©gl≈ëbe. Nem hi√°ba nevezt√©k el a r√©gi nagy kir√°lyr√≥l, hiszen a kicsi vend√©gl≈ë egy M√°ty√°s kir√°ly kor√°ban √©p√ºlt polg√°ri h√°zban m≈±k√∂dik!</p>
        <p style="margin-bottom: 14px;">Ne lep≈ëdjetek meg a vend√©gl≈ë k√≠n√°lat√°n: igaz√°b√≥l Magyarorsz√°gon vagytok, az √©telek pontosan olyanok, mint amiket itt hagytunk 1920-ban‚Ä¶. kiv√©ve, hogy errefel√© mindenhol kaphat√≥ a szlov√°kok egyetlen nemzeti eledele, a ‚Äûbryndzov√© halusky", azaz brindz√°s haluska, magyarul juht√∫r√≥s galuska. Ezt eszik m√©g ‚Äûbryndzov√© pirohy", azaz brindz√°s pirog, magyarul juht√∫r√≥s derelye form√°j√°ban is. Ennyi a szlov√°k konyha. A t√∂bbi az a magyar‚Ä¶. De a T√°tra-te√°t √©s a Kofol√°t nem szabad kihagyni üòä</p>
        <p style="margin-bottom: 14px;">Ha √©hesek vagytok, akkor egyetek egy gyorsat, mert ma m√©g hossz√∫ √∫t √°ll el≈ëttetek, √©s ne feledj√©tek: a kilencedik √°llom√°sra legk√©s≈ëbb 3:45-re oda kell √©rnetek!</p>
        <p style="margin-bottom: 0;">Matyi pinc√©j√©ben kell majd megfejtenetek a tov√°bbjut√°st jelent≈ë rejtv√©nyt!</p>
    </div>
</div>

<script>
function code5_check() {
    var v = document.getElementById("code5_input").value.trim();
    // kulcs ehhez a ponthoz: 2
    if (v === "2") {
        document.getElementById("code5_success").style.display = "block";
        document.getElementById("code5_input").style.display = "none";
        document.getElementById("code5_btn").textContent = "‚ûú Tov√°bb";
        document.getElementById("code5_btn").onclick = function() {
            window.location.href = "content5.html";
        };
        document.getElementById("code5_error").textContent = "";
    } else {
        document.getElementById("code5_error").textContent =
            "Ez most nem nyitotta ki a k√∂vetkez≈ë √°llom√°st. Sz√°molj√°tok meg √∫jra a bor√≥kafeny≈ëket!";
    }
}
</script>
<!-- /K√ìD BEK√âR≈ê BLOKK -->

<a href="index.html" class="home-btn">‚¨Ö Vissza a f≈ëoldalra</a>
</div>

</div>

<script>
// Akad√©mia t√°vols√°gm√©r√©s c√©lpontja
const targetLat = 48.4592749331696;
const targetLon = 18.898867085318535;

const startBtn = document.getElementById("startNavBtn");
const distanceText = document.getElementById("distanceText");
let watchId = null;

// Haversine t√°vols√°g m√©terben
function distanceMeters(lat1, lon1, lat2, lon2) {
    const R = 6371000;
    const toRad = x => x * Math.PI / 180;
    const dLat = toRad(lat2 - lat1);
    const dLon = toRad(lon2 - lon1);
    const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}

function formatDistance(m) {
    if (m < 5) return "Nagyj√°b√≥l az Akad√©mia bej√°rat√°n√°l vagy.";
    if (m < 1000) return m.toFixed(0) + " m√©ter";
    return (m / 1000).toFixed(2) + " km";
}

function onPosition(pos) {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;
    const dist = distanceMeters(lat, lon, targetLat, targetLon);
    distanceText.textContent =
        "Jelenlegi t√°vols√°g az Akad√©mi√°t√≥l: " + formatDistance(dist);
}

function onError(err) {
    distanceText.textContent =
        "Nem siker√ºlt lek√©rni a helyzetet. Ellen≈ërizd a GPS √©s a jogosults√°g be√°ll√≠t√°sait.";
}

startBtn.addEventListener("click", function () {
    if (!("geolocation" in navigator)) {
        distanceText.textContent =
            "A b√∂ng√©sz≈ë nem t√°mogatja a helymeghat√°roz√°st.";
        return;
    }

    if (watchId !== null) {
        // m√°r fut, le√°ll√≠tjuk
        navigator.geolocation.clearWatch(watchId);
        watchId = null;
        distanceText.textContent = "A t√°vols√°gm√©r√©s sz√ºnetel.";
        startBtn.textContent = "T√°vols√°g m√©r√©se (GPS)";
        return;
    }

    distanceText.textContent = "Helyzet lek√©r√©se...";
    startBtn.textContent = "M√©r√©s le√°ll√≠t√°sa";

    watchId = navigator.geolocation.watchPosition(onPosition, onError, {
        enableHighAccuracy: true,
        maximumAge: 5000,
        timeout: 10000
    });
});
</script>

<!-- FELOLVAS√ÅS SCRIPT -->
<script>
const speakBtn = document.getElementById('speakBtn');
const stopBtn = document.getElementById('stopBtn');
const storyPres = document.querySelectorAll('.story-pre');

let utterance = null;

speakBtn.addEventListener('click', function() {
    if (!('speechSynthesis' in window)) {
        alert('A b√∂ng√©sz≈ë nem t√°mogatja a felolvas√°st.');
        return;
    }

    // √ñsszegy≈±jtj√ºk a sz√∂veget
    let textToRead = '';
    storyPres.forEach(pre => {
        textToRead += pre.textContent + '\n\n';
    });

    utterance = new SpeechSynthesisUtterance(textToRead);
    utterance.lang = 'hu-HU';
    utterance.rate = 1.0;
    utterance.pitch = 1.0;

    utterance.onstart = function() {
        speakBtn.style.display = 'none';
        stopBtn.style.display = 'inline-block';
    };

    utterance.onend = function() {
        speakBtn.style.display = 'inline-block';
        stopBtn.style.display = 'none';
    };

    utterance.onerror = function() {
        speakBtn.style.display = 'inline-block';
        stopBtn.style.display = 'none';
    };

    window.speechSynthesis.speak(utterance);
});

stopBtn.addEventListener('click', function() {
    window.speechSynthesis.cancel();
    speakBtn.style.display = 'inline-block';
    stopBtn.style.display = 'none';
});
</script>

</body>
</html>
