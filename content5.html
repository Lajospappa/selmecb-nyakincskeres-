<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Matyi pincéje – A két szalamandra legendája</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: 'Georgia', serif;
    background: url('images/oszlop.png') center/cover no-repeat fixed;
    color: #f5f5f5;
    padding: 30px;
    margin: 0;
    text-shadow: 0 1px 3px rgba(0,0,0,0.9);
}

/* csak egy „láthatatlan” konténer a max-szélesség miatt */
.container {
    max-width: 700px;
    margin: auto;
    padding: 5px 5px 30px 5px;
    border-radius: 14px;
}

h1 {
    font-size: 30px;
    margin-bottom: 10px;
    text-align: center;
    color: #ffe7a3;
}

p {
    line-height: 1.6;
    font-size: 18px;
}

.highlight {
    color: #ffe7a3;
    font-weight: bold;
}

/* Távolság doboz */
.distance-box {
    margin: 15px 0 25px 0;
    padding: 12px 16px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.35);
    font-size: 16px;
    text-align: center;
}
.distance-box button {
    font-family: inherit;
    font-size: 16px;
    padding: 8px 14px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: #ffe7a3;
    color: #2b1b0c;
    margin-bottom: 8px;
}
.distance-box button:active {
    transform: scale(0.98);
}
.distance-status {
    display: block;
    margin-top: 4px;
    font-size: 15px;
}

/* gombsor */
.btn-row {
    text-align: center;
    margin-top: 10px;
}

/* Navigációs gomb – égkék, LENT */
.nav-btn {
    display: inline-block;
    margin: 6px 4px;
    padding: 9px 18px;
    background: #68c7ff;
    color: #033048;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    font-size: 15px;
}
.nav-btn:hover {
    filter: brightness(1.05);
}

/* Főoldal gomb */
.home-btn {
    display: inline-block;
    margin: 8px 4px 0 4px;
    padding: 9px 18px;
    background: #ffd97f;
    color: #333;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    font-size: 16px;
}
.home-btn:hover {
    filter: brightness(1.05);
}

/* Mobil finomhangolás */
@media (max-width: 480px) {
    body { padding: 15px; }
    .container { padding: 10px 5px 24px 5px; }
    h1 { font-size: 26px; }
    p { font-size: 17px; }
}
</style>
</head>

<body>

<div class="container">

<h1>5. ÁLLOMÁS: MATYI PINCÉJE</h1>

<!-- TÁVOLSÁGMÉRÉS -->
<div class="distance-box">
    <button id="startNavBtn">Távolság mérése (GPS)</button>
    <span id="distanceText" class="distance-status">
        Engedélyezd a helymeghatározást a böngészőben.
    </span>
</div>

<!-- NAVIGÁCIÓ GOMB – LENT, KÉKEN -->
<div class="btn-row">
    <a href="https://maps.app.goo.gl/Pf5SjLUB84LBm3YAA"
       target="_blank"
       class="nav-btn">
       📍 Útvonal a Reštaurácia Matejhez
    </a>
</div>

<p>A Kofola és Tátra-tea szürcsölése közben olvassátok el Selmecbánya legendáját:</p>

<p>A régi időkben, 1000 évnél is régebben, mikor errefelé csak hegyi pászorok éltek az erdők szélén, városnak nyoma sem volt, s a környező hegyek még némán őrizték kincseiket, egy pásztor járta a hegykoszorú legmagasabb csúcsa, a Szitnya alatti legelőket. Ezt a pásztort <span class="highlight">Sebnitz-nek</span> hívták. Egy napon különös látvány állította meg: két csodás teremtmény bújt elő a sziklák közül, s mikor a nap rájuk esett, az egyik aranyként, a másik meg ezüstként ragyogott.</p>

<p>Sebnitz, a pásztor napokon át figyelte őket. Látta, hogy mindig ugyanabba a kőhasadékba térnek vissza, s mintha a föld méhéből hoznák magukkal az arany és ezüst ragyogást. Végül Sebnitz fogta magát, félrehengerítette a sziklát…. s akkor a két lelkes állat eltűnt — de helyükön <span class="highlight">arany- és ezüst ér csillant meg</span>.</p>

<p>Így mutatta meg a pásztornak a Szitnya földje, hogy mit rejt magában ezen a vidéken. A két ragyogó teremtményt többé senki sem látta. Ám a történet fennmaradt örökre, s a később a mesés kis várost Sebnitz-ről nevezték el a bányászok: németül Sebnitz, később Semnitz, magyarul pedig <span class="highlight">Selmec</span> lett a neve.</p>

<p>A két csodás teremtmény legendája átszövi a várost… mindenfelé megtaláljátok őket, ha nyitva tartjátok a szemeteket. Még itt, a Mátyás vendéglőben is!</p>

<p style="margin-top:25px;" class="highlight">
Fejtsétek meg az alábbi rejtvényt, és a kulccsal megtudjátok, mi a következő célállomásotok…
</p>


<!-- FŐOLDAL GOMB -->








<!-- KÓD BEKÉRŐ BLOKK – SZALAMANDRA -->
<style>
/* középső doboz */
.codeask-container {
    max-width: 600px;
    margin: 40px auto 10px auto;
    background: rgba(0, 0, 0, 0.7);
    padding: 24px 20px 30px 20px;
    border-radius: 14px;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
}

/* cím */
.codeask-container h2 {
    font-size: 26px;
    margin-top: 0;
    margin-bottom: 14px;
    text-align: center;
    color: #ffe7a3;
}

/* szöveg */
.codeask-container p {
    font-size: 18px;
    line-height: 1.6;
    text-align: center;
    margin-bottom: 18px;
}

/* input + gomb */
.codeask-container input[type="text"] {
    width: 100%;
    padding: 10px 12px;
    margin-top: 4px;
    font-size: 18px;
    border-radius: 8px;
    border: none;
    box-sizing: border-box;
}

.codeask-btn {
    display: block;
    width: 100%;
    padding: 12px 16px;
    margin-top: 12px;
    font-size: 18px;
    font-weight: bold;
    font-family: inherit;
    text-align: center;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #ffe7a3;
    color: #333;
    box-shadow: 0 0 10px rgba(0,0,0,0.6);
}

.codeask-btn:active {
    transform: scale(0.98);
}

/* hibaüzenet */
#codeask_error {
    margin-top: 10px;
    font-size: 15px;
    color: #ffb3b3;
    text-align: center;
}

/* Mobil finomhangolás */
@media (max-width: 480px) {
    .codeask-container {
        margin: 20px 10px 10px 10px;
        padding: 20px 14px 24px 14px;
    }
    .codeask-container h2 {
        font-size: 24px;
    }
    .codeask-container p,
    .codeask-btn,
    .codeask-container input[type="text"] {
        font-size: 17px;
    }
}
</style>

<div class="codeask-container">
    <h2>🔐 Rejtvény</h2>
    <p style="font-size: 17px; line-height: 1.6;">
        A két legendás teremtménynek hatalmas, ragyogó példányai kúsznak felfelé itt, a sziklába vájt Mátyás vendéglő egyik sokszáz éves tartóoszlopán. Mik voltak tehát ezek az állatok, melyek Sebnitz-nek a Selmeci hegyek kincseit megmutatták?
    </p>

    <input id="codeask_code" type="text" autocomplete="off" placeholder="Írd ide a kulcsot">
    <button class="codeask-btn" type="button" onclick="codeask_check()">➜ Tovább</button>
    <div id="codeask_error"></div>
</div>

<script>
function codeask_norm(s){
    if(!s) return "";
    s = String(s).trim().toLowerCase();
    try { s = s.normalize("NFD").replace(/[\u0300-\u036f]/g,""); } catch(e){}
    return s;
}
function codeask_check() {
    var v = codeask_norm(document.getElementById("codeask_code").value);
    // kulcs ehhez a ponthoz: gyík
    if (v === "gyik") {
        document.getElementById("codeask_error").innerHTML =
            '<div style="color: #90EE90; font-size: 16px; margin-top: 15px; line-height: 1.6;">' +
            '✅ Megfejtettétek! Kinyílt az ajtó a következő célállomás felé… <br><br>' +
            '…és mostmár azt is tudjátok, hogy a valétáló selmeci diákok lámpás felvonulásán miért kígyózó alakban vonulnak fel az utcákon, és miért „szalamander" a felvonulás neve. 😊<br><br>' +
            'Most pedig irány a következő célállomás: fejtsétek meg a selmeci Leányvár legendáját!' +
            '</div>';
        setTimeout(function() {
            window.location.href = "content6.html";
        }, 6000);
    } else {
        document.getElementById("codeask_error").textContent =
            "Ez most nem a helyes válasz. Gondoljatok Sebnitz pásztorra és a két ragyogó teremtményre, akik megmutatták neki a kincseket!";
    }
}
</script>
<!-- /KÓD BEKÉRŐ BLOKK – SZALAMANDRA -->

<div class="btn-row">
    <a href="index.html" class="home-btn">
       ⬅ Főoldal
    </a>
</div>

</div>

<script>
// Matyi pincéje – távolságmérés célpontja
const targetLat = 48.45847681075344;
const targetLon = 18.896295422685196;

const startBtn = document.getElementById("startNavBtn");
const distanceText = document.getElementById("distanceText");
let watchId = null;

// Haversine távolság méterben
function distanceMeters(lat1, lon1, lat2, lon2) {
    const R = 6371000;
    const toRad = x => x * Math.PI / 180;
    const dLat = toRad(lat2 - lat1);
    const dLon = toRad(lon2 - lon1);
    const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}

function formatDistance(m) {
    if (m < 5) return "Nagyjából a vendéglőnél vagytok.";
    if (m < 1000) return m.toFixed(0) + " méter";
    return (m / 1000).toFixed(2) + " km";
}

function onPosition(pos) {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;
    const dist = distanceMeters(lat, lon, targetLat, targetLon);
    distanceText.textContent =
        "Jelenlegi távolság a vendéglőtől: " + formatDistance(dist);
}

function onError(err) {
    distanceText.textContent =
        "Nem sikerült lekérni a helyzetet. Ellenőrizd a GPS és a jogosultság beállításait.";
}

startBtn.addEventListener("click", function () {
    if (!("geolocation" in navigator)) {
        distanceText.textContent =
            "A böngésző nem támogatja a helymeghatározást.";
        return;
    }

    if (watchId !== null) {
        navigator.geolocation.clearWatch(watchId);
        watchId = null;
        distanceText.textContent = "A távolságmérés szünetel.";
        startBtn.textContent = "Távolság mérése (GPS)";
        return;
    }

    distanceText.textContent = "Helyzet lekérése...";
    startBtn.textContent = "Mérés leállítása";

    watchId = navigator.geolocation.watchPosition(onPosition, onError, {
        enableHighAccuracy: true,
        maximumAge: 5000,
        timeout: 10000
    });
});
</script>

</body>
</html>







